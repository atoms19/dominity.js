<!DOCTYPE html>
<html>
  <head>
    <title>SolidJS Runtime Render Test</title>
    <style>
      body {
        font-family: sans-serif;
      }
      button {
        margin-bottom: 1rem;
      }
    </style>
    <script type="module">
      import { createSignal } from "https://esm.sh/solid-js";
      import { render, insert } from "https://esm.sh/solid-js/web";

      function App() {
        const [items, setItems] = createSignal(
          Array.from({ length: 1000 }, (_, i) => i)
        );
        const [time, setTime] = createSignal(null);

        const updateItem = () => {
          const start = performance.now();
          const newItems = [...items()];
          newItems[500] = "UPDATED!";
          setItems(newItems);
          requestAnimationFrame(() => {
            const end = performance.now();
            setTime(end - start);
          });
        };

        const container = document.createElement("div");

        const button = document.createElement("button");
        button.textContent = "Update 500th item";
        button.onclick = updateItem;

        const timing = document.createElement("p");
        const list = document.createElement("ul");

        insert(timing, () =>
          time() !== null ? `Render Time: ${time().toFixed(2)}ms` : ""
        );

        insert(list, () =>
          items().map((item, i) => {
            const li = document.createElement("li");
            insert(li, `Item ${i}: ${item}`);
            return li;
          })
        );

        container.append(button, timing, list);
        return container;
      }

      render(App, document.body);
    </script>
  </head>
  <body></body>
</html>
